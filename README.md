# 📚 書籍JANコードリーダー

書籍のJANコード（ISBNとCコード）を読み取り、書籍情報と分類情報を表示するWebアプリケーションです。
バーコードリーダーでの連続入力に最適化されており、図書館や書店での蔵書整理などに活用できます。

## 🎯 機能

- **2段バーコード対応**: 書籍のISBN（上段）とCコード（下段）を連続して読み取ることができます。
- **書籍情報の取得**: OpenBD APIを使用して、ISBNから書籍名と日本十進分類法（NDC）を取得します。
- **Cコードの解析**: Cコードを解析し、販売対象・発行形態・内容分類を表示します。
- **全角入力対応**: 全角数字での入力も自動的に半角に変換して処理します（日本語入力モードのままでOK）。
- **連続入力フロー**: ISBN入力 → Cコード入力 → 結果表示 → 次の入力へ、とスムーズにフォーカスが移動します。

## 🚀 使い方

### 1. アプリケーションの起動

`index.html` をブラウザで開くだけで使用できます。

```bash
# ローカルサーバーで起動する場合（推奨）
npx serve .
```

### 2. バーコードの読み取り

1. バーコードリーダーを接続します。
2. 画面上の入力欄（上段：ISBN）にフォーカスがあることを確認します。
3. 書籍のバーコードを**上段（ISBN）→ 下段（Cコード）**の順にスキャンします。
4. 自動的に書籍情報と分類情報が表示され、入力欄がクリアされて次の入力待ち状態になります。

### 3. 手動入力

バーコードリーダーがない場合は、キーボードで手動入力も可能です。
- **ISBN**: 978から始まる13桁の数字
- **Cコード**: 4桁の数字（または192から始まるJANコード第2段）

**入力例:**
- ISBN: `9784101001012`
- Cコード: `0091` または `1920093005804`

## 📋 技術仕様

### Cコードについて
Cコードは日本の書籍に付けられる4桁の分類コードです：
- **1桁目**: 販売対象（0=一般、1=教養、2=実用、3=専門、8=児童など）
- **2桁目**: 発行形態（0=単行本、1=文庫、2=新書、3=全集など）
- **3-4桁目**: 内容分類（00=総記、10=哲学、20=歴史、90=文学など）

### 外部API
- **OpenBD API**: 書籍タイトルとNDC分類の取得に使用

### 技術スタック
- HTML5
- CSS3（レスポンシブデザイン、アニメーション）
- Vanilla JavaScript（ES Modules）

## 📁 ファイル構成

```
book-barcode-reader/
├── index.html      # メインHTML
├── style.css       # スタイルシート
├── app.js          # アプリケーションロジック（入力制御、API連携）
├── ccode-data.js   # Cコード分類データ定義
└── README.md       # ドキュメント
```

## ⚠️ 注意事項

- OpenBD に登録されていない書籍の場合、書籍情報やNDC分類が取得できない場合があります。
- Cコードの分類データは一般的なものを搭載していますが、すべてのコードを網羅しているわけではありません。

## 🔧 カスタマイズ

### Cコード分類の追加・修正
`ccode-data.js` ファイルの `CCODE_DATA` オブジェクトを編集することで、分類を追加・修正できます。

### デザインの変更
`style.css` を編集してデザインをカスタマイズできます。

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

---

**開発者向けメモ:**
- バーコードリーダーからの入力は通常、末尾にEnterキー（改行）が付加されます。アプリはこのEnterキーをトリガーとしてフォーカス移動や処理実行を行います。
- 全角数字（０-９）は `BarcodeParser.normalizeInput` メソッドで半角に正規化されます。
